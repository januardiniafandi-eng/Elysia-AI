<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ELYSIΛ AI V5.5 - ULTIMATE AGENCY ENGINE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --neon: #1aff1a; --orange: #ff6600; --dark: #0a0a0a; --card: #141414; --text: #e0e0e0; --red: #f40612; }
        body { background: var(--dark); color: var(--text); font-family: 'Segoe UI', sans-serif; margin: 0; padding-bottom: 70px; overflow-x: hidden; }
        
        /* Navigation (Scrollable) */
        .nav-bar { display: flex; background: #111; border-bottom: 2px solid var(--orange); position: sticky; top: 0; z-index: 1000; overflow-x: auto; scrollbar-width: none; }
        .nav-bar::-webkit-scrollbar { display: none; }
        .nav-item { flex: none; padding: 15px 25px; text-align: center; font-size: 10px; font-weight: bold; cursor: pointer; color: #666; text-transform: uppercase; white-space: nowrap; transition: 0.3s; }
        .nav-item.active { color: var(--orange); border-bottom: 3px solid var(--orange); background: #1a1a1a; }
        
        .page { display: none; padding: 20px; max-width: 600px; margin: auto; animation: fadeIn 0.4s ease; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .logo { color: var(--neon); font-size: 28px; font-weight: 900; text-align: center; margin: 20px 0 5px; letter-spacing: 4px; text-shadow: 0 0 15px var(--neon); }
        .version { color: var(--orange); font-size: 10px; text-align: center; margin-bottom: 25px; font-weight: bold; letter-spacing: 1px; }

        /* Form UI */
        .group { margin-bottom: 15px; }
        label { display: block; font-size: 10px; color: var(--orange); margin-bottom: 6px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
        input, select, textarea { width: 100%; background: #111; border: 1px solid #333; border-radius: 8px; padding: 12px; color: #fff; font-size: 13px; box-sizing: border-box; outline: none; transition: 0.3s; }
        input:focus, select:focus { border-color: var(--neon); }

        /* Buttons */
        .btn { border: none; width: 100%; padding: 16px; border-radius: 10px; font-weight: 800; cursor: pointer; text-transform: uppercase; margin-top: 10px; font-size: 11px; display: flex; align-items: center; justify-content: center; gap: 10px; transition: 0.3s; }
        .btn-audit { background: transparent; border: 1px solid var(--neon); color: var(--neon); }
        .btn-audit:hover { background: var(--neon); color: #000; }
        .btn-execute { background: var(--red); color: #fff; opacity: 0.5; cursor: not-allowed; }
        .btn-execute.ready { opacity: 1; cursor: pointer; box-shadow: 0 0 20px rgba(244, 6, 18, 0.4); }

        /* Console Area */
        #console { background: #000; border-radius: 8px; padding: 15px; font-family: 'Courier New', monospace; font-size: 11px; height: 300px; overflow-y: auto; border: 1px solid #222; margin-top: 15px; line-height: 1.6; position: relative; }
        .audit-card { border-left: 3px solid var(--neon); background: #1a1a1a; padding: 12px; margin: 10px 0; border-radius: 4px; border-top-right-radius: 10px; border-bottom-right-radius: 10px; }
        
        /* Monitoring Table */
        table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 11px; }
        th { background: #111; color: var(--orange); padding: 12px; text-align: left; border-bottom: 2px solid #222; }
        td { padding: 12px; border-bottom: 1px solid #222; color: #ccc; }
    </style>
</head>
<body>

    <div class="nav-bar">
        <div class="nav-item active" onclick="switchPage(1)">CRM & Audit</div>
        <div class="nav-item" onclick="switchPage(2)">Execution Hub</div>
        <div class="nav-item" onclick="switchPage(3)">Monitoring</div>
        <div class="nav-item" onclick="switchPage(4)">Master Data</div>
    </div>

    <div id="page1" class="page active">
        <div class="logo">ELYSIΛ AI</div>
        <div class="version">V5.5 - FULL STRATEGY ENGINE</div>
        
        <div class="group"><label>Brand Name</label><input type="text" id="c-name" placeholder="Nama Klien / Brand..."></div>
        
        <div class="group">
            <label>Platform Target</label>
            <select id="p-platform">
                <option value="TikTok">TikTok</option>
                <option value="Instagram">Instagram</option>
                <option value="YouTube">YouTube</option>
                <option value="Facebook">Facebook</option>
                <option value="Google Business">Google Business</option>
                <option value="Tokopedia">Tokopedia</option>
                <option value="Shopee">Shopee</option>
                <option value="Corporate Website">Website</option>
            </select>
        </div>

        <div class="group">
            <label><i class="fas fa-map-marker-alt"></i> Geo-Targeting (38 Provinsi)</label>
            <select id="p-geo">
                <option value="National">Nasional (Random Rotating IP)</option>
                <optgroup label="SUMATERA">
                    <option value="Aceh">Aceh</option><option value="Sumatera Utara">Sumatera Utara</option>
                    <option value="Sumatera Barat">Sumatera Barat</option><option value="Riau">Riau</option>
                    <option value="Kepulauan Riau">Kepulauan Riau</option><option value="Jambi">Jambi</option>
                    <option value="Bengkulu">Bengkulu</option><option value="Sumatera Selatan">Sumatera Selatan</option>
                    <option value="Bangka Belitung">Bangka Belitung</option><option value="Lampung">Lampung</option>
                </optgroup>
                <optgroup label="JAWA">
                    <option value="DKI Jakarta">DKI Jakarta</option><option value="Banten">Banten</option>
                    <option value="Jawa Barat">Jawa Barat</option><option value="Jawa Tengah">Jawa Tengah</option>
                    <option value="DI Yogyakarta">DI Yogyakarta</option><option value="Jawa Timur">Jawa Timur</option>
                </optgroup>
                <optgroup label="BALI & NUSA TENGGARA">
                    <option value="Bali">Bali</option><option value="Nusa Tenggara Barat">Nusa Tenggara Barat</option>
                    <option value="Nusa Tenggara Timur">Nusa Tenggara Timur</option>
                </optgroup>
                <optgroup label="KALIMANTAN">
                    <option value="Kalimantan Barat">Kalimantan Barat</option><option value="Kalimantan Tengah">Kalimantan Tengah</option>
                    <option value="Kalimantan Selatan">Kalimantan Selatan</option><option value="Kalimantan Timur">Kalimantan Timur</option>
                    <option value="Kalimantan Utara">Kalimantan Utara</option>
                </optgroup>
                <optgroup label="SULAWESI">
                    <option value="Sulawesi Utara">Sulawesi Utara</option><option value="Gorontalo">Gorontalo</option>
                    <option value="Sulawesi Tengah">Sulawesi Tengah</option><option value="Sulawesi Barat">Sulawesi Barat</option>
                    <option value="Sulawesi Selatan">Sulawesi Selatan</option><option value="Sulawesi Tenggara">Sulawesi Tenggara</option>
                </optgroup>
                <optgroup label="MALUKU & PAPUA">
                    <option value="Maluku">Maluku</option><option value="Maluku Utara">Maluku Utara</option>
                    <option value="Papua">Papua</option><option value="Papua Barat">Papua Barat</option>
                    <option value="Papua Selatan">Papua Selatan</option><option value="Papua Tengah">Papua Tengah</option>
                    <option value="Papua Pegunungan">Papua Pegunungan</option><option value="Papua Barat Daya">Papua Barat Daya</option>
                </optgroup>
            </select>
        </div>

        <div class="group"><label>Asset URL</label><input type="url" id="p-url" placeholder="https://..."></div>
        
        <button class="btn btn-audit" onclick="runAudit()">
            <i class="fas fa-microscope"></i> START DEEP AI AUDIT
        </button>
    </div>

    <div id="page2" class="page">
        <div class="group">
            <label>Package Selection (Based on Audit)</label>
            <select id="p-package">
                <option value="Starter (1jt)">Paket 1: Starter (1jt)</option>
                <option value="Business (5jt)">Paket 3: Business (5jt)</option>
                <option value="Sultan Monopoly (50jt)">Paket 10: Sultan Monopoly (50jt)</option>
            </select>
        </div>
        <button id="btn-exec" class="btn btn-execute" onclick="executeNodes()">
            <i class="fas fa-bolt"></i> EXECUTE INTELLIGENCE NODES
        </button>
        <div id="console"><div id="console-output">> STANDBY... WAITING FOR AUDIT DATA.</div></div>
    </div>

    <div id="page3" class="page">
        <h3 style="color:var(--orange)">CAMPAIGN MONITOR</h3>
        <table>
            <thead><tr><th>Client</th><th>Platform</th><th>Geo</th><th>Status</th></tr></thead>
            <tbody id="monitor-list"></tbody>
        </table>
    </div>

    <div id="page4" class="page">
        <h3 style="color:var(--orange)">MASTER SETTINGS</h3>
        <div class="group"><label>Global Proxy Node (Status: Active)</label><input type="text" value="ROTATING_PROXY_ENABLED" disabled></div>
        <div class="group">
            <label>API Neural Link</label>
            <select><option>Gemini-1.5-Pro (Primary)</option><option>OpenAI-GPT4o (Backup)</option></select>
        </div>
        <div style="background:#111; padding:15px; border-radius:10px; font-size:11px;">
            <b style="color:var(--neon)">SYSTEM STATUS:</b><br>
            • AI Core: Online<br>
            • Proxy Tunnel: Rotating Active<br>
            • Database: Local Cloud Encrypted
        </div>
    </div>

    <script>
        let auditReady = false;
        let db = JSON.parse(localStorage.getItem('elysia_v55_db')) || [];

        function switchPage(n) {
            document.querySelectorAll('.page').forEach((p, i) => p.classList.toggle('active', i+1 === n));
            document.querySelectorAll('.nav-item').forEach((item, i) => item.classList.toggle('active', i+1 === n));
            if(n === 3) renderMonitor();
        }

        async function runAudit() {
            const name = document.getElementById('c-name').value;
            const url = document.getElementById('p-url').value;
            const geo = document.getElementById('p-geo').value;
            if(!name || !url) return alert("Lengkapi data!");

            switchPage(2);
            const output = document.getElementById('console-output');
            output.innerHTML = `<span style="color:var(--neon)">[SYSTEM] Initializing Audit in ${geo}...</span><br>`;
            
            try {
                const response = await fetch('/api/audit', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ clientName: name, platform: document.getElementById('p-platform').value, url: url, geo: geo })
                });
                const data = await response.json();
                if(data.success) {
                    const res = data.audit;
                    output.innerHTML = `
                        <div class="audit-card">
                            <b style="color:var(--neon)">AUDIT SCORE: ${res.score}/100</b><br>
                            <small>Target: ${geo}</small><br><br>
                            <p>${res.analysis}</p>
                            <b style="color:var(--orange)">RECOMMENDATION:</b><br>
                            <span>Package: ${res.recommended_package}</span><br>
                            <small>${res.reason}</small>
                        </div>`;
                    auditReady = true;
                    document.getElementById('btn-exec').classList.add('ready');
                }
            } catch (e) { output.innerHTML += `<br>Error connecting to AI Core.`; }
        }

        async function executeNodes() {
            if(!auditReady) return alert("Audit dulu!");
            const output = document.getElementById('console-output');
            output.innerHTML += `<br><span style="color:var(--orange)">[DEPLOY] Connecting to Rotating Proxy Nodes...</span>`;

            try {
                const response = await fetch('/api/execute', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ 
                        clientName: document.getElementById('c-name').value,
                        platform: document.getElementById('p-platform').value,
                        package: document.getElementById('p-package').value,
                        geo: document.getElementById('p-geo').value
                    })
                });
                const data = await response.json();
                if(data.success) {
                    output.innerHTML = `<div style="color:var(--neon); font-size:12px;"><b>[FINAL EXECUTION REPORT]</b><br><br>${data.execution_report.replace(/\n/g, '<br>')}</div>`;
                    db.push({ 
                        name: document.getElementById('c-name').value, 
                        platform: document.getElementById('p-platform').value, 
                        geo: document.getElementById('p-geo').value, 
                        status: 'COMPLETED' 
                    });
                    localStorage.setItem('elysia_v55_db', JSON.stringify(db));
                }
            } catch (e) { output.innerHTML += `<br>Execution Failed.`; }
        }

        function renderMonitor() {
            document.getElementById('monitor-list').innerHTML = db.map(c => 
                `<tr><td>${c.name}</td><td>${c.platform}</td><td>${c.geo}</td><td style="color:var(--neon)">${c.status}</td></tr>`
            ).reverse().join('');
        }
    </script>
</body>
</html>
